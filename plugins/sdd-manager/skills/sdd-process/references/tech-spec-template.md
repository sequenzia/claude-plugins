# Tech Spec Template

This template provides the structure for Technical Specification Documents generated by the SDD process.

---

## Document Structure

```markdown
---
project: {project-name}
type: tech-spec
version: 1.0.0
created: {ISO-timestamp}
last_updated: {ISO-timestamp}
detail_level: {high|mid|in-depth}
status: draft
related_documents:
  - ./prd.md
  - ./design-spec.md
---

# {Project Name} - Technical Specification

## Overview

{Brief technical summary covering:
- What is being built technically
- Key architectural decisions
- Technology choices}

## System Architecture

### High-Level Architecture

{Architecture diagram description or ASCII diagram}

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Client    │────▶│   Server    │────▶│  Database   │
└─────────────┘     └─────────────┘     └─────────────┘
```

### Component Breakdown

#### Component: {Component Name}
- **Purpose**: {What this component does}
- **Responsibilities**: {List of responsibilities}
- **Interfaces**: {How other components interact with it}
- **Dependencies**: {What this component depends on}

### Communication Patterns
{How components communicate - sync/async, protocols, patterns}

## Data Models

### Entity: {Entity Name}

```
{EntityName}
├── id: UUID (primary key)
├── field_name: type (constraints)
├── created_at: timestamp
└── updated_at: timestamp
```

**Relationships:**
- {Relationship description}

**Indexes:**
- {Index description}

### Database Schema

{Schema design considerations:
- Normalization decisions
- Partitioning strategy
- Replication requirements}

### Data Flow

{Description of how data moves through the system}

```
User Input → Validation → Processing → Storage → Response
```

## API Specifications

### Endpoint: {HTTP Method} {Path}

**Purpose**: {What this endpoint does}

**Request:**
```json
{
  "field": "type - description"
}
```

**Response (200):**
```json
{
  "field": "type - description"
}
```

**Error Responses:**
| Code | Description |
|------|-------------|
| 400 | {description} |
| 401 | {description} |
| 404 | {description} |

**Authentication**: {Auth requirements}

**Rate Limits**: {Rate limiting details}

## Technology Stack

### Languages & Frameworks
| Layer | Technology | Version | Rationale |
|-------|------------|---------|-----------|
| Backend | {tech} | {version} | {why} |
| Frontend | {tech} | {version} | {why} |
| Database | {tech} | {version} | {why} |

### Infrastructure
- **Hosting**: {Platform/service}
- **CI/CD**: {Pipeline tools}
- **Monitoring**: {Observability tools}

### Dependencies
| Package | Version | Purpose |
|---------|---------|---------|
| {package} | {version} | {purpose} |

## Integration Points

### External Service: {Service Name}
- **Purpose**: {Why this integration exists}
- **Protocol**: {REST/GraphQL/gRPC/etc}
- **Authentication**: {Auth method}
- **Data Exchange**: {What data flows}
- **Error Handling**: {How errors are handled}
- **Fallback Strategy**: {What happens if service is unavailable}

### Internal Service: {Service Name}
- **Purpose**: {Why this integration exists}
- **Communication**: {How services communicate}
- **Contract**: {Interface agreement}

## Technical Decisions

### Decision: {Decision Title}

**Context**: {What prompted this decision}

**Options Considered**:
1. {Option 1}: {Pros/Cons}
2. {Option 2}: {Pros/Cons}

**Decision**: {What was decided}

**Rationale**: {Why this option was chosen}

**Consequences**: {Trade-offs accepted}

## Security Considerations

### Authentication
{How users/services authenticate}

### Authorization
{How permissions are managed}

### Data Protection
{How sensitive data is protected}

### Security Boundaries
{Trust boundaries and security zones}

## Performance Considerations

### Expected Load
| Metric | Expected | Peak |
|--------|----------|------|
| Requests/sec | {value} | {value} |
| Concurrent users | {value} | {value} |
| Data volume | {value} | {value} |

### Optimization Strategies
{Caching, indexing, query optimization, etc.}

### Performance Budgets
| Operation | Target | Maximum |
|-----------|--------|---------|
| {operation} | {target} | {max} |

## Error Handling

### Error Categories
| Category | Handling Strategy | User Communication |
|----------|-------------------|-------------------|
| Validation | {strategy} | {message} |
| System | {strategy} | {message} |
| External | {strategy} | {message} |

### Retry Policies
{Retry logic and backoff strategies}

### Circuit Breaker Patterns
{Circuit breaker implementation details}

## Testing Strategy

### Unit Tests
{Unit testing approach and coverage targets}

### Integration Tests
{Integration testing strategy}

### End-to-End Tests
{E2E testing approach}

### Performance Tests
{Load/stress testing plans}

## Deployment Strategy

### Environments
| Environment | Purpose | Config |
|-------------|---------|--------|
| Development | {purpose} | {config} |
| Staging | {purpose} | {config} |
| Production | {purpose} | {config} |

### Deployment Process
{How deployments are executed}

### Rollback Procedure
{How to rollback if issues occur}

### Feature Flags
{Feature flag strategy if applicable}

## Monitoring & Observability

### Metrics
| Metric | Type | Alert Threshold |
|--------|------|-----------------|
| {metric} | {counter/gauge/histogram} | {threshold} |

### Logging
{Logging strategy and levels}

### Alerting
{Alert rules and escalation}

## Migration Plan (If Applicable)

### Data Migration
{How existing data will be migrated}

### Backward Compatibility
{How backward compatibility is maintained}

### Cutover Strategy
{How the switch to new system occurs}

## Open Technical Questions

- [ ] {Question 1}
- [ ] {Question 2}

## Appendix

### Glossary
{Technical terms and definitions}

### References
{Links to relevant documentation, RFCs, etc.}
```

---

## Section Guidelines

### System Architecture
- Include visual diagrams (even ASCII)
- Show data flow directions
- Identify component boundaries
- Document communication protocols

### Data Models
- Use consistent notation
- Document relationships explicitly
- Include indexes and constraints
- Note migration considerations

### API Specifications
- Follow OpenAPI/REST conventions
- Include all request/response fields
- Document error scenarios
- Specify authentication requirements

### Technology Stack
- Justify technology choices
- Include version numbers
- Note upgrade paths
- Document license implications

### Technical Decisions
- Use ADR (Architecture Decision Record) format
- Document alternatives considered
- Explain trade-offs
- Note reversibility

---

## Detail Level Variations

### High-Level Tech Spec
Include:
- Overview
- System Architecture (high-level diagram)
- Technology Stack (key choices)
- Technical Decisions (major only)
- Open Questions

### Mid-Level Tech Spec
Include all High-Level sections plus:
- Data Models (core entities)
- API Specifications (key endpoints)
- Integration Points
- Security Considerations (overview)
- Testing Strategy (approach)

### In-Depth Tech Spec
Include all sections with full detail:
- Complete data model with all fields
- Full API documentation
- Detailed security analysis
- Performance budgets and testing plans
- Migration plans
- Monitoring specifications

---

## Writing Guidelines

### For AI Agents
- Make implementation details concrete
- Include code patterns where helpful
- Provide clear interface contracts
- Document assumptions explicitly

### Structure
- Use consistent formatting for similar items
- Include code blocks with syntax highlighting
- Use tables for structured data
- Number sections for reference

### Clarity
- Define technical terms
- Link to external documentation
- Explain non-obvious decisions
- Include examples where helpful
